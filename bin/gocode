#!/bin/bash
# vim: set filetype=sh :
set -e

# FIXME works but YCM doesn't seem to be calling this file

COMPOSE_DIR="$(dirname $0)"

args=$(echo "$@" | sed "s#$GOPATH#/go#") # parse the local $GOPATH out with    
                                         # docker $GOPATH /go

echo "$args" >> "$(dirname $0)/../gocode.log" # debug

docker-compose --file="${COMPOSE_DIR}/../docker-compose.yml" run --rm -T gocode ${args[@]}
